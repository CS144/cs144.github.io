<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sponge: Router Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="sponge_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="sponge_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sponge
   </div>
   <div id="projectbrief">CS144&#39;s user-space TCP library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_router-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Router Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A router that has multiple network interfaces and performs longest-prefix-match routing between them.  
 <a href="class_router.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="router_8hh_source.html">router.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abb328523b579cc65ad89e6f653ae213c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_router.html#abb328523b579cc65ad89e6f653ae213c">add_interface</a> (<a class="el" href="class_async_network_interface.html">AsyncNetworkInterface</a> &amp;&amp;<a class="el" href="class_router.html#ae5b7a22ff5cfc41dd0d21d1b824e052e">interface</a>)</td></tr>
<tr class="separator:abb328523b579cc65ad89e6f653ae213c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab04ccf88eb593c6cd51e1613b8137b08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_router.html#ab04ccf88eb593c6cd51e1613b8137b08">add_route</a> (const <a class="elRef" target="_blank" href="https://en.cppreference.com/w/cpp/types/integer.html">uint32_t</a> route_prefix, const <a class="elRef" target="_blank" href="https://en.cppreference.com/w/cpp/types/integer.html">uint8_t</a> prefix_length, const std::optional&lt; <a class="el" href="class_address.html">Address</a> &gt; next_hop, const <a class="elRef" target="_blank" href="https://en.cppreference.com/w/cpp/types/size_t.html">size_t</a> interface_num)</td></tr>
<tr class="memdesc:ab04ccf88eb593c6cd51e1613b8137b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a route (a forwarding rule)  <a href="class_router.html#ab04ccf88eb593c6cd51e1613b8137b08">More...</a><br /></td></tr>
<tr class="separator:ab04ccf88eb593c6cd51e1613b8137b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5b7a22ff5cfc41dd0d21d1b824e052e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_async_network_interface.html">AsyncNetworkInterface</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_router.html#ae5b7a22ff5cfc41dd0d21d1b824e052e">interface</a> (const size_t N)</td></tr>
<tr class="memdesc:ae5b7a22ff5cfc41dd0d21d1b824e052e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access an interface by index.  <a href="class_router.html#ae5b7a22ff5cfc41dd0d21d1b824e052e">More...</a><br /></td></tr>
<tr class="separator:ae5b7a22ff5cfc41dd0d21d1b824e052e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14aa22a0b1e02bea04d50ab2296e8ef3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_router.html#a14aa22a0b1e02bea04d50ab2296e8ef3">route</a> ()</td></tr>
<tr class="memdesc:a14aa22a0b1e02bea04d50ab2296e8ef3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route packets between the interfaces.  <a href="class_router.html#a14aa22a0b1e02bea04d50ab2296e8ef3">More...</a><br /></td></tr>
<tr class="separator:a14aa22a0b1e02bea04d50ab2296e8ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a938adb5974e8bb0892c2a3232a7402ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_router.html#a938adb5974e8bb0892c2a3232a7402ce">route_one_datagram</a> (<a class="el" href="ipv4__datagram_8hh.html#aeca09aee8edbf62b798c1d1faa8a2334">InternetDatagram</a> &amp;dgram)</td></tr>
<tr class="separator:a938adb5974e8bb0892c2a3232a7402ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a0ff88ecae7ed0584ac77af0a2086b5f7"><td class="memItemLeft" align="right" valign="top"><a class="elRef" target="_blank" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt; <a class="el" href="class_async_network_interface.html">AsyncNetworkInterface</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_router.html#a0ff88ecae7ed0584ac77af0a2086b5f7">_interfaces</a> {}</td></tr>
<tr class="memdesc:a0ff88ecae7ed0584ac77af0a2086b5f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The router's collection of network interfaces.  <a href="class_router.html#a0ff88ecae7ed0584ac77af0a2086b5f7">More...</a><br /></td></tr>
<tr class="separator:a0ff88ecae7ed0584ac77af0a2086b5f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A router that has multiple network interfaces and performs longest-prefix-match routing between them. </p>

<p class="definition">Definition at line <a class="el" href="router_8hh_source.html#l00043">43</a> of file <a class="el" href="router_8hh_source.html">router.hh</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="abb328523b579cc65ad89e6f653ae213c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb328523b579cc65ad89e6f653ae213c">&#9670;&nbsp;</a></span>add_interface()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Router::add_interface </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_async_network_interface.html">AsyncNetworkInterface</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>interface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add an interface to the router </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">interface</td><td>an already-constructed network interface </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index of the interface after it has been added to the router </dd></dl>

<p class="definition">Definition at line <a class="el" href="router_8hh_source.html#l00056">56</a> of file <a class="el" href="router_8hh_source.html">router.hh</a>.</p>

</div>
</div>
<a id="ab04ccf88eb593c6cd51e1613b8137b08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab04ccf88eb593c6cd51e1613b8137b08">&#9670;&nbsp;</a></span>add_route()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Router::add_route </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" target="_blank" href="https://en.cppreference.com/w/cpp/types/integer.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>route_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" target="_blank" href="https://en.cppreference.com/w/cpp/types/integer.html">uint8_t</a>&#160;</td>
          <td class="paramname"><em>prefix_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::optional&lt; <a class="el" href="class_address.html">Address</a> &gt;&#160;</td>
          <td class="paramname"><em>next_hop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" target="_blank" href="https://en.cppreference.com/w/cpp/types/size_t.html">size_t</a>&#160;</td>
          <td class="paramname"><em>interface_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a route (a forwarding rule) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">route_prefix</td><td>The "up-to-32-bit" IPv4 address prefix to match the datagram's destination address against </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prefix_length</td><td>For this route to be applicable, how many high-order (most-significant) bits of the route_prefix will need to match the corresponding bits of the datagram's destination address? </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">next_hop</td><td>The IP address of the next hop. Will be empty if the network is directly attached to the router (in which case, the next hop address should be the datagram's final destination). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">interface_num</td><td>The index of the interface to send the datagram out on. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="router_8cc_source.html#l00025">25</a> of file <a class="el" href="router_8cc_source.html">router.cc</a>.</p>

</div>
</div>
<a id="ae5b7a22ff5cfc41dd0d21d1b824e052e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5b7a22ff5cfc41dd0d21d1b824e052e">&#9670;&nbsp;</a></span>interface()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_async_network_interface.html">AsyncNetworkInterface</a>&amp; Router::interface </td>
          <td>(</td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>N</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Access an interface by index. </p>

<p class="definition">Definition at line <a class="el" href="router_8hh_source.html#l00062">62</a> of file <a class="el" href="router_8hh_source.html">router.hh</a>.</p>

</div>
</div>
<a id="a14aa22a0b1e02bea04d50ab2296e8ef3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14aa22a0b1e02bea04d50ab2296e8ef3">&#9670;&nbsp;</a></span>route()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Router::route </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Route packets between the interfaces. </p>

<p class="definition">Definition at line <a class="el" href="router_8cc_source.html#l00042">42</a> of file <a class="el" href="router_8cc_source.html">router.cc</a>.</p>

</div>
</div>
<a id="a938adb5974e8bb0892c2a3232a7402ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a938adb5974e8bb0892c2a3232a7402ce">&#9670;&nbsp;</a></span>route_one_datagram()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Router::route_one_datagram </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ipv4__datagram_8hh.html#aeca09aee8edbf62b798c1d1faa8a2334">InternetDatagram</a> &amp;&#160;</td>
          <td class="paramname"><em>dgram</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Send a single datagram from the appropriate outbound interface to the next hop, as specified by the route with the longest prefix_length that matches the datagram's destination address.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dgram</td><td>The datagram to be routed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="router_8cc_source.html#l00037">37</a> of file <a class="el" href="router_8cc_source.html">router.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a0ff88ecae7ed0584ac77af0a2086b5f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ff88ecae7ed0584ac77af0a2086b5f7">&#9670;&nbsp;</a></span>_interfaces</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" target="_blank" href="https://en.cppreference.com/w/cpp/container/vector.html">std::vector</a>&lt;<a class="el" href="class_async_network_interface.html">AsyncNetworkInterface</a>&gt; Router::_interfaces {}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The router's collection of network interfaces. </p>

<p class="definition">Definition at line <a class="el" href="router_8hh_source.html#l00045">45</a> of file <a class="el" href="router_8hh_source.html">router.hh</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/cs144/sponge/libsponge/<a class="el" href="router_8hh_source.html">router.hh</a></li>
<li>/home/cs144/sponge/libsponge/<a class="el" href="router_8cc_source.html">router.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
